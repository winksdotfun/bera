(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{45492:(e,t,n)=>{Promise.resolve().then(n.bind(n,72975))},47790:()=>{},72975:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var a=n(95155),s=n(12115);n(85035);var i=n(63439);let r=()=>(0,a.jsx)(i.pK.Custom,{children:e=>{let{account:t,chain:n,openAccountModal:s,openChainModal:i,openConnectModal:r,authenticationStatus:p,mounted:d}=e,u=d&&"loading"!==p,l=u&&t&&n&&(!p||"authenticated"===p);return(0,a.jsx)("div",{...!u&&{"aria-hidden":!0,style:{opacity:0,pointerEvents:"none",userSelect:"none"}},children:l?n.unsupported?(0,a.jsx)("button",{className:" bg-red-500",onClick:i,type:"button",children:"Wrong network"}):(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("button",{className:"connect-button w-full",onClick:s,type:"button",children:[t.displayName,t.displayBalance?" (".concat(t.displayBalance,")"):""]})}):(0,a.jsx)("button",{className:"connect-button w-full",onClick:r,type:"button",children:"Connect Wallet"})})}});var p=n(66766),d=n(2145),u=n(89769),l=n(24632);let o=JSON.parse('[{"inputs":[{"internalType":"address","name":"_stakingToken","type":"address"},{"internalType":"uint256","name":"_rewardsDuration","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"EnforcedPause","type":"error"},{"inputs":[],"name":"ExpectedPause","type":"error"},{"inputs":[],"name":"MaxNumberOfRewards","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"Unauthorized","type":"error"},{"inputs":[],"name":"ZeroAddress","type":"error"},{"inputs":[],"name":"ZeroAmount","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Recovered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"rewardsToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"address","name":"rewardsToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"rewardsToken","type":"address"}],"name":"RewardRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"rewardsToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"rewardsDuration","type":"uint256"}],"name":"RewardStored","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"rewardsToken","type":"address"},{"indexed":true,"internalType":"address","name":"newDistributor","type":"address"}],"name":"RewardsDistributorUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"newDuration","type":"uint256"}],"name":"RewardsDurationUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdrawn","type":"event"},{"inputs":[],"name":"MAX_NUM_REWARD_TOKENS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsToken","type":"address"},{"internalType":"uint256","name":"_rewardsDuration","type":"uint256"}],"name":"addReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"_balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"_rewardsToken","type":"address"}],"name":"earned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"exit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAllRewardTokens","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getAllRewardsForUser","outputs":[{"components":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"internalType":"struct IInfraredVault.UserReward[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsToken","type":"address"}],"name":"getRewardForDuration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getRewardForUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"infrared","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsToken","type":"address"}],"name":"lastTimeRewardApplicable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardToken","type":"address"},{"internalType":"uint256","name":"_reward","type":"uint256"}],"name":"notifyRewardAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"pauseStaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"address","name":"_token","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"recoverERC20","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsToken","type":"address"}],"name":"removeReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewardData","outputs":[{"internalType":"address","name":"rewardsDistributor","type":"address"},{"internalType":"uint256","name":"rewardsDuration","type":"uint256"},{"internalType":"uint256","name":"periodFinish","type":"uint256"},{"internalType":"uint256","name":"rewardRate","type":"uint256"},{"internalType":"uint256","name":"lastUpdateTime","type":"uint256"},{"internalType":"uint256","name":"rewardPerTokenStored","type":"uint256"},{"internalType":"uint256","name":"rewardResidual","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsToken","type":"address"}],"name":"rewardPerToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"rewardTokens","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"rewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardsVault","outputs":[{"internalType":"contract IRewardVault","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stakingToken","outputs":[{"internalType":"contract ERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"unpauseStaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsToken","type":"address"},{"internalType":"uint256","name":"_rewardsDuration","type":"uint256"}],"name":"updateRewardsDuration","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"userRewardPerTokenPaid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),y=JSON.parse('[{"inputs":[{"internalType":"address","name":"_admin","type":"address"},{"internalType":"address","name":"_minter","type":"address"},{"internalType":"address","name":"_pauser","type":"address"},{"internalType":"address","name":"_burner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"AccessControlBadConfirmation","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bytes32","name":"neededRole","type":"bytes32"}],"name":"AccessControlUnauthorizedAccount","type":"error"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientAllowance","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientBalance","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC20InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC20InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC20InvalidSender","type":"error"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"name":"ERC20InvalidSpender","type":"error"},{"inputs":[],"name":"EnforcedPause","type":"error"},{"inputs":[],"name":"ExpectedPause","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[],"name":"BURNER_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINTER_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAUSER_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getRoleMember","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleMemberCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleMembers","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"callerConfirmation","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}]');var c=n(40165),m=n(37233),b=n(54416),f=n(51154),T=n(43453),x=n(33786);let w=e=>{let{isOpen:t,onClose:n,txHash:s,isProcessing:i,isApproving:r}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 relative",children:[(0,a.jsx)("button",{onClick:n,className:"absolute right-4 top-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(b.A,{size:24})}),(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(i||r)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"animate-spin mx-auto",size:48}),(0,a.jsx)("h3",{className:"text-xl font-medium",children:r?"Approving Transaction...":"Processing Transaction..."}),(0,a.jsx)("p",{className:"text-gray-600",children:r?"Please wait while we approve your transaction":"Please wait while your transaction is being processed"})]}),s&&!i&&!r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"text-green-500 mx-auto",size:48}),(0,a.jsx)("h3",{className:"text-xl font-medium",children:"Transaction Successful!"}),(0,a.jsxs)("p",{className:" text-black",children:[" You just scored ",(0,a.jsx)("span",{className:"font-semibold",children:"100"})," wink points!"]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,a.jsxs)("button",{onClick:()=>window.open("https://berascan.com/tx/".concat(s),"_blank"),className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:["View Transaction ",(0,a.jsx)(x.A,{size:16})]}),(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"})]})]})]})]})}):null},v=()=>{let[e,t]=(0,s.useState)(!1),[n,i]=(0,s.useState)(),[b,f]=(0,s.useState)(0),[T,x]=(0,s.useState)(0),[v,h]=(0,s.useState)(""),[g,j]=(0,s.useState)(!1),[M,k]=(0,s.useState)(!1),[N,R]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1),[_,A]=(0,s.useState)(!1),[B,S]=(0,s.useState)(""),[F,P]=(0,s.useState)(""),[I,D]=(0,s.useState)(""),[O,U]=(0,s.useState)(!1),[G,L]=(0,s.useState)(0),[z,W]=(0,s.useState)(!1),{isConnected:V,address:J}=(0,d.F)(),{writeContractAsync:K}=(0,u.x)(),X=(0,l.e)();(0,s.useEffect)(()=>{(async()=>{try{var e;let n=await fetch("/api/proxy");if(!n.ok)throw Error("Network response was not ok");let a=await n.json(),s=a.reward_tokens.find(e=>void 0!==e.apr);console.log("apr",s?s.apr:null);let r=(s?s.apr:null)*100,p=null===(e=a.underlying_tokens.find(e=>"iBGT"===e.symbol))||void 0===e?void 0:e.price;x(p),i(r),f(a.tvl),t(a)}catch(e){console.error("Error fetching stats:",e)}})()},[]);let Z=async()=>{if(J)try{W(!0);let e=await fetch("https://inner-circle-seven.vercel.app/api/action/getPoints?address=".concat(J),{method:"GET"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));let t=await e.json();console.log("Winkpoints data:",t),t&&void 0!==t.points?L(t.points):(console.warn("Invalid data format received:",t),L(0))}catch(e){console.error("Error fetching winkpoints:",e),L(0)}finally{W(!1)}},$=g?parseFloat(v)*T:0;(0,s.useEffect)(()=>{g&&$>parseFloat(I)?k(!0):k(!1)},[$,I,g]);let H=async()=>{if(!J)return BigInt(0);try{return await (null==X?void 0:X.readContract({address:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b",abi:[{name:"allowance",type:"function",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]}],functionName:"allowance",args:[J,"0x75F3Be06b02E235f6d0E7EF2D462b29739168301"]}))}catch(e){return console.error("Error checking allowance:",e),BigInt(0)}},Y=async()=>{P(""),U(!0),console.log(J,"amount",v);let e="";try{let t=m.g5(v).toString(),n=await H();if(console.log(n,"currentAllowance"),console.log(t,"inputAmount"),BigInt(n)<BigInt(t)){R(!0);let e=await K({address:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b",abi:y,functionName:"approve",args:["0x75F3Be06b02E235f6d0E7EF2D462b29739168301",t],chain:c._,account:J});await (null==X?void 0:X.waitForTransactionReceipt({hash:e})),R(!1)}C(!0);let a=await K({address:"0x75F3Be06b02E235f6d0E7EF2D462b29739168301",abi:o,functionName:"stake",args:[t],chain:c._,account:J});e=a,await (null==X?void 0:X.waitForTransactionReceipt({hash:a})),C(!1),S(e),await q()}catch(t){console.error("Error:",t);let e="Transaction failed";t instanceof Error&&(e=t.message.includes("user rejected transaction")?"Transaction rejected by user":t.message.includes("insufficient funds")?"Insufficient funds for gas":"Error: ".concat(t.message.split("\n")[0])),P(e),R(!1),U(!1)}finally{A(!!e),Z()}},q=async()=>{try{let e=await fetch("https://inner-circle-seven.vercel.app/api/action/setPoints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:J})});if(!e.ok)throw Error("Failed to update points");let t=await e.json();console.log("Points updated:",t),L(0),Z()}catch(e){console.error("Error updating points:",e)}};(0,s.useEffect)(()=>{(async()=>{if(J&&X)try{let e=await (null==X?void 0:X.readContract({address:"0xac03CABA51e17c86c921E1f6CBFBdC91F8BB2E6b",abi:[{name:"balanceOf",type:"function",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]}],functionName:"balanceOf",args:[J]}));D(m.Js(e,18)),console.log(e)}catch(e){console.error("Error fetching balances:",e)}})()},[J,X]),(0,s.useEffect)(()=>{Z()},[J,Z,X]);let Q=!g||M||E||N;return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"container mx-auto bricolage-font",children:[(0,a.jsxs)("div",{className:"infrared-card max-w-[450px] mx-auto",children:[(0,a.jsxs)("div",{className:"infrared-card-header bg-product-header-gradient bg-cover border-gray-300 border rounded-t-xl space-y-2",children:[(0,a.jsxs)("div",{className:" flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 ",children:[(0,a.jsx)(p.default,{src:"/images/ibgt-logo.svg",alt:"iBGT logo",width:30,height:30}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"iBGT"})]}),(0,a.jsxs)("p",{className:" bg-gray-800/50 text-white p-2 rounded-xl text-sm px-3",children:["Wink points: ",G]})]}),(0,a.jsx)("p",{className:"",children:"Stake iBGT to earn rewards."}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm opacity-80",children:"APR"}),(0,a.jsxs)("div",{className:"text-xl font-medium",children:[null==n?void 0:n.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm opacity-80",children:"TVL"}),(0,a.jsxs)("div",{className:"text-xl font-medium",children:["$ ",null!==b?(b/1e6).toFixed(2):"Loading...","M"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm opacity-80",children:"% of iBGT staked"}),(0,a.jsx)("div",{className:"text-xl font-medium",children:"79.03%"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 border-gray-300 border border-t-0 rounded-b-xl space-y-2",children:[(0,a.jsxs)("div",{className:" flex justify-between items-center",children:[(0,a.jsxs)("p",{children:["Available: ",I," iBGT"]}),(0,a.jsx)("button",{className:" bg-gray-800 text-white p-0.5 px-2 rounded-lg",onClick:()=>h(I),children:" MAX"})]}),(0,a.jsxs)("div",{className:"border p-4 border-gray-300 rounded-xl",children:[(0,a.jsxs)("div",{className:" flex",children:[(0,a.jsx)("input",{type:"text",className:" w-full bg-transparent focus:outline-none text-xl",placeholder:"0.0",value:v,onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"");j(!isNaN(parseFloat(t))&&""!==t),h(t)}}),(0,a.jsx)(p.default,{src:"/images/ibgt-logo.svg",width:24,height:24,alt:"iBGT"})]}),(0,a.jsxs)("p",{children:["$",(null==$?void 0:$.toFixed(2))||0]})]}),V?(0,a.jsx)("button",{className:"connect-button w-full flex justify-center",disabled:Q,onClick:Y,children:M?"Insufficient Balance":"Stake"}):(0,a.jsx)(r,{})]})]}),(0,a.jsx)("p",{className:" text-center text-black mt-2",children:"Powered by winks.fun"})]}),(0,a.jsx)(w,{isOpen:O,onClose:()=>U(!1),txHash:B,isProcessing:E,isApproving:N})]}):(0,a.jsxs)("div",{className:"flex flex-col h-screen justify-center items-center bricolage-font",children:[(0,a.jsx)(p.default,{src:"/images/ibgt-logo.svg",width:50,height:50,className:"animate-spin",alt:"stBGT"}),(0,a.jsx)("p",{children:"Loading..."})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4106,8451,6875,2437,1633,8441,1684,7358],()=>t(45492)),_N_E=e.O()}]);